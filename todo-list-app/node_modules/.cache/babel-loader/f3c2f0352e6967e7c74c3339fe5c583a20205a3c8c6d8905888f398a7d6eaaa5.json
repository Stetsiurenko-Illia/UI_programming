{"ast":null,"code":"import React,{useState}from\"react\";import axios from\"axios\";import\"bootstrap/dist/css/bootstrap.min.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function LoginModal(_ref){let{onClose,onLoginSuccess,onSwitchToRegister}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[error,setError]=useState(\"\");const handleLogin=async()=>{try{const response=await axios.post(\"https://wep-app.onrender.com/api/login/\",{email,password});const{access,refresh}=response.data;localStorage.setItem(\"accessToken\",access);localStorage.setItem(\"refreshToken\",refresh);onLoginSuccess();onClose();}catch(err){setError(\"Неправильний email або пароль\");console.error(\"Помилка входу:\",err.response?err.response.data:err.message);}};return/*#__PURE__*/_jsx(\"div\",{className:\"modal d-block\",style:{backgroundColor:\"rgba(0,0,0,0.5)\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog modal-dialog-centered\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438 \\u0434\\u043E \\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:onClose})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",id:\"email\",value:email,onChange:e=>setEmail(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",id:\"password\",value:password,onChange:e=>setPassword(e.target.value)})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleLogin,children:\"\\u0423\\u0432\\u0456\\u0439\\u0442\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link\",onClick:onSwitchToRegister,children:\"\\u041D\\u0435\\u043C\\u0430\\u0454 \\u0430\\u043A\\u0430\\u0443\\u043D\\u0442\\u0430? \\u0417\\u0430\\u0440\\u0435\\u0454\\u0441\\u0442\\u0440\\u0443\\u0432\\u0430\\u0442\\u0438\\u0441\\u044F\"})]})]})})});}export default LoginModal;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","LoginModal","_ref","onClose","onLoginSuccess","onSwitchToRegister","email","setEmail","password","setPassword","error","setError","handleLogin","response","post","access","refresh","data","localStorage","setItem","err","console","message","className","style","backgroundColor","children","onClick","htmlFor","type","id","value","onChange","e","target"],"sources":["D:/KPI/5_course/Web-app/UI_programming/todo-list-app/src/components/LoginModal.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nfunction LoginModal({ onClose, onLoginSuccess, onSwitchToRegister }) {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n\r\n  const handleLogin = async () => {\r\n    try {\r\n      const response = await axios.post(\r\n        \"https://wep-app.onrender.com/api/login/\",\r\n        {\r\n          email,\r\n          password,\r\n        }\r\n      );\r\n      const { access, refresh } = response.data;\r\n      localStorage.setItem(\"accessToken\", access);\r\n      localStorage.setItem(\"refreshToken\", refresh);\r\n      onLoginSuccess();\r\n      onClose();\r\n    } catch (err) {\r\n      setError(\"Неправильний email або пароль\");\r\n      console.error(\r\n        \"Помилка входу:\",\r\n        err.response ? err.response.data : err.message\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"modal d-block\"\r\n      style={{ backgroundColor: \"rgba(0,0,0,0.5)\" }}\r\n    >\r\n      <div className=\"modal-dialog modal-dialog-centered\">\r\n        <div className=\"modal-content\">\r\n          <div className=\"modal-header\">\r\n            <h5 className=\"modal-title\">Увійти до системи</h5>\r\n            <button className=\"btn-close\" onClick={onClose}></button>\r\n          </div>\r\n          <div className=\"modal-body\">\r\n            {error && <div className=\"alert alert-danger\">{error}</div>}\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"email\" className=\"form-label\">\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control\"\r\n                id=\"email\"\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"mb-3\">\r\n              <label htmlFor=\"password\" className=\"form-label\">\r\n                Пароль\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"modal-footer\">\r\n            <button className=\"btn btn-primary\" onClick={handleLogin}>\r\n              Увійти\r\n            </button>\r\n            <button className=\"btn btn-link\" onClick={onSwitchToRegister}>\r\n              Немає акаунта? Зареєструватися\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoginModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}